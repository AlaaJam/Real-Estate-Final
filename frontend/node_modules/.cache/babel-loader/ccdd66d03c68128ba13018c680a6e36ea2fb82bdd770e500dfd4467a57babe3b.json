{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC 26\\\\Desktop\\\\final-final\\\\Real-Estate-Website-main-main\\\\frontend\\\\src\\\\routes\\\\AdminRoute.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || \"\";\nfunction getUserFromStorage() {\n  try {\n    const raw = localStorage.getItem(\"user\");\n    return raw ? JSON.parse(raw) : null;\n  } catch {\n    return null;\n  }\n}\nexport default function AdminRoute({\n  component: Component,\n  ...rest\n}) {\n  _s();\n  const [state, setState] = useState(\"loading\");\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      const lsUser = getUserFromStorage();\n      if ((lsUser === null || lsUser === void 0 ? void 0 : lsUser.email) === \"admin@gmail.com\") {\n        if (!cancelled) setState(\"allow\");\n        return;\n      }\n      try {\n        const res = await fetch(`${API_BASE}/api/auth/me`, {\n          credentials: \"include\"\n        });\n        if (res.ok) {\n          const u = await res.json();\n          if (!cancelled) setState((u === null || u === void 0 ? void 0 : u.email) === \"admin@gmail.com\" ? \"allow\" : \"deny\");\n        } else {\n          if (!cancelled) setState(\"deny\");\n        }\n      } catch {\n        if (!cancelled) setState(\"deny\");\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Route, {\n    ...rest,\n    render: props => state === \"loading\" ? null : state === \"allow\" ? /*#__PURE__*/_jsxDEV(Component, {\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 31\n    }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 31\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminRoute, \"wM9t3JDpDZMRIYCr4B3khtHRzgk=\");\n_c = AdminRoute;\nvar _c;\n$RefreshReg$(_c, \"AdminRoute\");","map":{"version":3,"names":["React","useEffect","useState","Route","Redirect","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","getUserFromStorage","raw","localStorage","getItem","JSON","parse","AdminRoute","component","Component","rest","_s","state","setState","cancelled","lsUser","email","res","fetch","credentials","ok","u","json","render","props","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["C:/Users/PC 26/Desktop/final-final/Real-Estate-Website-main-main/frontend/src/routes/AdminRoute.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst API_BASE = process.env.REACT_APP_API_BASE || \"\";\r\n\r\nfunction getUserFromStorage() {\r\n  try {\r\n    const raw = localStorage.getItem(\"user\");\r\n    return raw ? JSON.parse(raw) : null;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default function AdminRoute({ component: Component, ...rest }) {\r\n  const [state, setState] = useState(\"loading\");\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    (async () => {\r\n      const lsUser = getUserFromStorage();\r\n      if (lsUser?.email === \"admin@gmail.com\") {\r\n        if (!cancelled) setState(\"allow\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await fetch(`${API_BASE}/api/auth/me`, { credentials: \"include\" });\r\n        if (res.ok) {\r\n          const u = await res.json();\r\n          if (!cancelled) setState(u?.email === \"admin@gmail.com\" ? \"allow\" : \"deny\");\r\n        } else {\r\n          if (!cancelled) setState(\"deny\");\r\n        }\r\n      } catch {\r\n        if (!cancelled) setState(\"deny\");\r\n      }\r\n    })();\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        state === \"loading\" ? null :\r\n        state === \"allow\"   ? <Component {...props} /> :\r\n                              <Redirect to=\"/\" />\r\n      }\r\n    />\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,KAAK,EAAEC,QAAQ,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,EAAE;AAErD,SAASC,kBAAkBA,CAAA,EAAG;EAC5B,IAAI;IACF,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACxC,OAAOF,GAAG,GAAGG,IAAI,CAACC,KAAK,CAACJ,GAAG,CAAC,GAAG,IAAI;EACrC,CAAC,CAAC,MAAM;IACN,OAAO,IAAI;EACb;AACF;AAEA,eAAe,SAASK,UAAUA,CAAC;EAAEC,SAAS,EAAEC,SAAS;EAAE,GAAGC;AAAK,CAAC,EAAE;EAAAC,EAAA;EACpE,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,SAAS,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACd,IAAIuB,SAAS,GAAG,KAAK;IACrB,CAAC,YAAY;MACX,MAAMC,MAAM,GAAGd,kBAAkB,CAAC,CAAC;MACnC,IAAI,CAAAc,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEC,KAAK,MAAK,iBAAiB,EAAE;QACvC,IAAI,CAACF,SAAS,EAAED,QAAQ,CAAC,OAAO,CAAC;QACjC;MACF;MAEA,IAAI;QACF,MAAMI,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGrB,QAAQ,cAAc,EAAE;UAAEsB,WAAW,EAAE;QAAU,CAAC,CAAC;QAC9E,IAAIF,GAAG,CAACG,EAAE,EAAE;UACV,MAAMC,CAAC,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,CAAC;UAC1B,IAAI,CAACR,SAAS,EAAED,QAAQ,CAAC,CAAAQ,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEL,KAAK,MAAK,iBAAiB,GAAG,OAAO,GAAG,MAAM,CAAC;QAC7E,CAAC,MAAM;UACL,IAAI,CAACF,SAAS,EAAED,QAAQ,CAAC,MAAM,CAAC;QAClC;MACF,CAAC,CAAC,MAAM;QACN,IAAI,CAACC,SAAS,EAAED,QAAQ,CAAC,MAAM,CAAC;MAClC;IACF,CAAC,EAAE,CAAC;IACJ,OAAO,MAAM;MAAEC,SAAS,GAAG,IAAI;IAAE,CAAC;EACpC,CAAC,EAAE,EAAE,CAAC;EAEN,oBACElB,OAAA,CAACH,KAAK;IAAA,GACAiB,IAAI;IACRa,MAAM,EAAGC,KAAK,IACZZ,KAAK,KAAK,SAAS,GAAG,IAAI,GAC1BA,KAAK,KAAK,OAAO,gBAAKhB,OAAA,CAACa,SAAS;MAAA,GAAKe;IAAK;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,gBACxBhC,OAAA,CAACF,QAAQ;MAACmC,EAAE,EAAC;IAAG;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EACzC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEN;AAACjB,EAAA,CArCuBJ,UAAU;AAAAuB,EAAA,GAAVvB,UAAU;AAAA,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}