{"ast":null,"code":"import { GET_PROPERTIES, GET_FEATURED_PROPERTIES, GET_PROPERTY } from \"../constants/propertyConstants\";\nimport { api } from \"../../helpers/api\";\n\n// frontend/src/redux/actions/propertiesAction.js\nconst API_BASE = (process.env.REACT_APP_API_URL || \"http://localhost:7542\").replace(/\\/$/, \"\");\nconst toPublicUrl = name => {\n  if (!name) return `${API_BASE}/images/houses/placeholder.jpg`;\n  if (/^https?:\\/\\//i.test(name)) return name;\n  if (name.startsWith(\"/images/\")) return `${API_BASE}${name}`;\n  return `${API_BASE}/images/houses/${name.replace(/^\\/+/, \"\")}`;\n};\nconst toCard = row => ({\n  id: row.id,\n  title: row.title,\n  price: row.price,\n  location: [row.city, row.state].filter(Boolean).join(\", \"),\n  description: row.description || \"\",\n  imageUrl: toPublicUrl(row.imageUrl),\n  featured: !!row.featured\n});\n\n// frontend/src/redux/actions/propertiesAction.js\n\nconst toDetail = row => ({\n  id: row.id,\n  title: row.title,\n  price: row.price,\n  // prefer pre-computed location or fallback to city/state\n  location: row.location || [row.city, row.state].filter(Boolean).join(\", \"),\n  description: row.description || \"\",\n  imageUrl: toPublicUrl(row.imageUrl),\n  // ensure gallery images are public URLs\n  images: Array.isArray(row.images) ? row.images.map(toPublicUrl) : [],\n  amenities: row.amenities || [],\n  features: row.features || {},\n  address: row.address || {},\n  type: row.type || \"\",\n  listedIn: row.listedIn || \"\",\n  category: row.category || \"\",\n  featured: !!row.featured,\n  createdAt: row.createdAt\n});\nexport const getPropertyList = (page = 1, limit = 12) => async dispatch => {\n  const rows = await api(`/api/properties?page=${page}&limit=${limit}`);\n  dispatch({\n    type: GET_PROPERTIES,\n    payload: rows.map(toCard)\n  });\n};\nexport const getFeaturedList = () => async dispatch => {\n  const rows = await api(`/api/properties?featured=true&limit=6`);\n  dispatch({\n    type: GET_FEATURED_PROPERTIES,\n    payload: rows.map(toCard)\n  });\n};\n\n// export const getProperty = (id) => async (dispatch) => {\n//   const row = await api(`/api/properties/${id}`);\n//   dispatch({ type: GET_PROPERTY, payload: toCard(row) });\n// };\n\nexport const getProperty = id => async dispatch => {\n  const row = await api(`/api/properties/${id}`);\n  dispatch({\n    type: GET_PROPERTY,\n    payload: toDetail(row)\n  }); // ✅ keep all fields\n};","map":{"version":3,"names":["GET_PROPERTIES","GET_FEATURED_PROPERTIES","GET_PROPERTY","api","API_BASE","process","env","REACT_APP_API_URL","replace","toPublicUrl","name","test","startsWith","toCard","row","id","title","price","location","city","state","filter","Boolean","join","description","imageUrl","featured","toDetail","images","Array","isArray","map","amenities","features","address","type","listedIn","category","createdAt","getPropertyList","page","limit","dispatch","rows","payload","getFeaturedList","getProperty"],"sources":["C:/Users/PC 26/Desktop/final-final/Real-Estate-Website-main-main/frontend/src/redux/actions/propertiesAction.js"],"sourcesContent":["import {\n  GET_PROPERTIES,\n  GET_FEATURED_PROPERTIES,\n  GET_PROPERTY,\n} from \"../constants/propertyConstants\";\nimport { api } from \"../../helpers/api\";\n\n\n// frontend/src/redux/actions/propertiesAction.js\nconst API_BASE = (process.env.REACT_APP_API_URL || \"http://localhost:7542\").replace(/\\/$/, \"\");\n\nconst toPublicUrl = (name) => {\n  if (!name) return `${API_BASE}/images/houses/placeholder.jpg`;\n  if (/^https?:\\/\\//i.test(name)) return name;\n  if (name.startsWith(\"/images/\")) return `${API_BASE}${name}`;\n  return `${API_BASE}/images/houses/${name.replace(/^\\/+/, \"\")}`;\n};\n\n\nconst toCard = (row) => ({\n  id: row.id,\n  title: row.title,\n  price: row.price,\n  location: [row.city, row.state].filter(Boolean).join(\", \"),\n  description: row.description || \"\",\n  imageUrl: toPublicUrl(row.imageUrl),\n  featured: !!row.featured,\n});\n\n\n// frontend/src/redux/actions/propertiesAction.js\n\nconst toDetail = (row) => ({\n  id: row.id,\n  title: row.title,\n  price: row.price,\n  // prefer pre-computed location or fallback to city/state\n  location: row.location || [row.city, row.state].filter(Boolean).join(\", \"),\n  description: row.description || \"\",\n  imageUrl: toPublicUrl(row.imageUrl),\n  // ensure gallery images are public URLs\n  images: Array.isArray(row.images) ? row.images.map(toPublicUrl) : [],\n  amenities: row.amenities || [],\n  features: row.features || {},\n  address: row.address || {},\n  type: row.type || \"\",\n  listedIn: row.listedIn || \"\",\n  category: row.category || \"\",\n  featured: !!row.featured,\n  createdAt: row.createdAt,\n});\n\n\nexport const getPropertyList = (page = 1, limit = 12) => async (dispatch) => {\n  const rows = await api(`/api/properties?page=${page}&limit=${limit}`);\n  dispatch({ type: GET_PROPERTIES, payload: rows.map(toCard) });\n};\n\nexport const getFeaturedList = () => async (dispatch) => {\n  const rows = await api(`/api/properties?featured=true&limit=6`);\n  dispatch({ type: GET_FEATURED_PROPERTIES, payload: rows.map(toCard) });\n};\n\n// export const getProperty = (id) => async (dispatch) => {\n//   const row = await api(`/api/properties/${id}`);\n//   dispatch({ type: GET_PROPERTY, payload: toCard(row) });\n// };\n\n\nexport const getProperty = (id) => async (dispatch) => {\n  const row = await api(`/api/properties/${id}`);\n  dispatch({ type: GET_PROPERTY, payload: toDetail(row) }); // ✅ keep all fields\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}